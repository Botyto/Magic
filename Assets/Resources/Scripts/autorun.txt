setmetatable(_G, nil)
if FirstLoad == nil then
	FirstLoad = true
end
local wasFirst = FirstLoad

--Load library files
Script.DoFile("Scripts/lib/lib")
Script.DoFile("Scripts/lib/core")
Script.DoFile("Scripts/lib/class")
Script.DoFile("Scripts/lib/Object")

--Load source code
Script.DoFolder("Script/", function(filename)
	return not string.ends_with(filename, "autorun")
end)

FirstLoad = false
setmetatable(_G, {
	__index = function(t, key)
		errorf("Undefined global '%s'", tostring(key))
	end,
	__newindex = function(t, key, value)
		errorf("Assigning undefined global '%s'", tostring(key))
	end,
})

--Prepare for execution
BuildClasses()

RaiseEvent("Start", wasFirst)
